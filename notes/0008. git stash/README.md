# [0008. git stash](https://github.com/tnotesjs/TNotes.git-notes/tree/main/notes/0008.%20git%20stash)

<!-- region:toc -->

- [1. ğŸ“’ `git stash` å‘½ä»¤çš„ä½œç”¨](#1--git-stash-å‘½ä»¤çš„ä½œç”¨)
- [2. ğŸ“’ `git stash` å‘½ä»¤åˆ—è¡¨](#2--git-stash-å‘½ä»¤åˆ—è¡¨)
- [3. ğŸ“’ `git stash` å‘½ä»¤çš„åŸºæœ¬ä½¿ç”¨](#3--git-stash-å‘½ä»¤çš„åŸºæœ¬ä½¿ç”¨)
  - [3.1. æš‚å­˜å½“å‰å·¥ä½œç›®å½•](#31-æš‚å­˜å½“å‰å·¥ä½œç›®å½•)
  - [3.2. æŸ¥çœ‹æš‚å­˜åˆ—è¡¨](#32-æŸ¥çœ‹æš‚å­˜åˆ—è¡¨)
  - [3.3. æ¢å¤æš‚å­˜çš„ä¿®æ”¹](#33-æ¢å¤æš‚å­˜çš„ä¿®æ”¹)
    - [3.3.1. æ¢å¤ä½†ä¸åˆ é™¤](#331-æ¢å¤ä½†ä¸åˆ é™¤)
    - [3.3.2. æ¢å¤å¹¶åˆ é™¤ stash](#332-æ¢å¤å¹¶åˆ é™¤-stash)
  - [3.4. åˆ é™¤ stash](#34-åˆ é™¤-stash)
    - [3.4.1. åˆ é™¤æŒ‡å®š stash](#341-åˆ é™¤æŒ‡å®š-stash)
    - [3.4.2. åˆ é™¤æ‰€æœ‰ stash](#342-åˆ é™¤æ‰€æœ‰-stash)
  - [3.5. ä»… stash æŸäº›æ–‡ä»¶](#35-ä»…-stash-æŸäº›æ–‡ä»¶)
- [4. ğŸ“’ `git stash` çš„é€‚ç”¨åœºæ™¯](#4--git-stash-çš„é€‚ç”¨åœºæ™¯)

<!-- endregion:toc -->
- `git stash` æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å‘½ä»¤ï¼Œé€‚ç”¨äºéœ€è¦ä¸´æ—¶å­˜å‚¨æ›´æ”¹çš„åœºæ™¯ï¼

## 1. ğŸ“’ `git stash` å‘½ä»¤çš„ä½œç”¨

- `git stash` ç”¨äº**æš‚å­˜**ï¼ˆå­˜å‚¨ï¼‰å½“å‰çš„å·¥ä½œç›®å½•ä¿®æ”¹ï¼Œä½¿å…¶å›åˆ°**å¹²å‡€çŠ¶æ€**ï¼Œæ–¹ä¾¿åˆ‡æ¢åˆ†æ”¯æˆ–æ‰§è¡Œå…¶ä»–æ“ä½œã€‚ä¹‹åå¯ä»¥éšæ—¶æ¢å¤è¿™äº›ä¿®æ”¹ã€‚
- **åŸºæœ¬åŠŸèƒ½**
  - **ä¿å­˜æœªæäº¤çš„ä¿®æ”¹**ï¼ˆä½†ä¸å½±å“æš‚å­˜åŒºçš„å†…å®¹ï¼‰
  - **å·¥ä½œåŒºæ¢å¤åˆ°å¹²å‡€çŠ¶æ€**ï¼ˆå°±åƒåˆš `git checkout` ä¸€æ ·ï¼‰
  - **å¯ä»¥å¤šæ¬¡ `stash` å¹¶ç®¡ç†å¤šä¸ªå­˜å‚¨**
  - **æ”¯æŒéƒ¨åˆ†æ–‡ä»¶æš‚å­˜**
  - **å¯ä»¥åº”ç”¨æˆ–ä¸¢å¼ƒæš‚å­˜çš„æ›´æ”¹**

## 2. ğŸ“’ `git stash` å‘½ä»¤åˆ—è¡¨

| å‘½ä»¤                       | ä½œç”¨                 |
| -------------------------- | -------------------- |
| `git stash`                | æš‚å­˜æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ |
| `git stash list`           | æŸ¥çœ‹æ‰€æœ‰ stash       |
| `git stash apply`          | æ¢å¤ stashï¼Œä½†ä¸åˆ é™¤ |
| `git stash pop`            | æ¢å¤ stashï¼Œå¹¶åˆ é™¤   |
| `git stash drop stash@{n}` | åˆ é™¤æŒ‡å®š stash       |
| `git stash clear`          | æ¸…é™¤æ‰€æœ‰ stash       |

## 3. ğŸ“’ `git stash` å‘½ä»¤çš„åŸºæœ¬ä½¿ç”¨

### 3.1. æš‚å­˜å½“å‰å·¥ä½œç›®å½•

```sh
git stash
```

- **ä½œç”¨**ï¼š
  - **ä¿å­˜**ï¼šæœªæäº¤çš„ä¿®æ”¹ï¼ˆä½†ä¸åŒ…æ‹¬ `git add` è¿‡çš„éƒ¨åˆ†ï¼‰
  - **æ¢å¤**ï¼šå·¥ä½œåŒºå›åˆ°ä¸Šæ¬¡æäº¤çš„çŠ¶æ€ï¼ˆ**æ–‡ä»¶ä¿®æ”¹æ¶ˆå¤±ï¼Œä½†æ²¡æœ‰ä¸¢å¤±**ï¼‰

---

### 3.2. æŸ¥çœ‹æš‚å­˜åˆ—è¡¨

```sh
git stash list
```

ç¤ºä¾‹è¾“å‡ºï¼š

```sh
stash@{0}: WIP on main: 4a5b6c7 ä¿®å¤ bug
stash@{1}: WIP on main: 1a2b3c4 æ·»åŠ æ–°åŠŸèƒ½
```

æ¯ä¸ª `stash@{n}` ä»£è¡¨ä¸€æ¬¡ `stash` è®°å½•ï¼Œç¼–å· `0` æ˜¯æœ€è¿‘çš„å­˜å‚¨ã€‚


### 3.3. æ¢å¤æš‚å­˜çš„ä¿®æ”¹

#### 3.3.1. æ¢å¤ä½†ä¸åˆ é™¤

```sh
git stash apply stash@{0}
```

- åªæ¢å¤ `stash@{0}` é‡Œçš„å†…å®¹ï¼Œä½†**ä¸ä¼šåˆ é™¤ stash è®°å½•**ã€‚

#### 3.3.2. æ¢å¤å¹¶åˆ é™¤ stash

```sh
git stash pop
```

- æ¢å¤æœ€æ–°çš„ `stash`ï¼Œå¹¶**åˆ é™¤**å®ƒã€‚

### 3.4. åˆ é™¤ stash

#### 3.4.1. åˆ é™¤æŒ‡å®š stash

```sh
git stash drop stash@{0}
```

- ä»…åˆ é™¤ `stash@{0}` è¿™ä¸€é¡¹ã€‚

#### 3.4.2. åˆ é™¤æ‰€æœ‰ stash

```sh
git stash clear
```

- æ¸…ç©ºæ‰€æœ‰ stash è®°å½•ï¼Œæ— æ³•æ¢å¤ï¼

### 3.5. ä»… stash æŸäº›æ–‡ä»¶

å¦‚æœä½ åªæƒ³ stash **éƒ¨åˆ†æ–‡ä»¶**ï¼Œå¯ä»¥ä½¿ç”¨ï¼š

```sh
git stash push -m "ä»…æš‚å­˜ main.js" -- main.js
```

ç„¶åæ¢å¤æ—¶ï¼š

```sh
git stash apply stash@{0}
```

è¿™æ ·å¯ä»¥åªå­˜ç‰¹å®šæ–‡ä»¶çš„ä¿®æ”¹ã€‚

## 4. ğŸ“’ `git stash` çš„é€‚ç”¨åœºæ™¯

1. **åˆ‡æ¢åˆ†æ”¯æ—¶ä¸æƒ³æäº¤ä½†åˆä¸æƒ³ä¸¢å¤±ä¿®æ”¹**
   ```sh
   git stash
   git checkout å…¶ä»–åˆ†æ”¯
   ```
2. **ä¿®å¤ç´§æ€¥ bug**
   ```sh
   git stash
   git checkout bug-fix-branch
   ```
   ä¿®å¤å®Œåï¼š
   ```sh
   git checkout main
   git stash pop  # æ¢å¤åŸæ¥çš„ä»£ç 
   ```
3. **é¿å…ä¸´æ—¶æäº¤**
   - åªæƒ³ä¿å­˜å·¥ä½œï¼Œä¸æƒ³æäº¤çš„æƒ…å†µä¸‹ï¼Œstash æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚
